<view class="edit-page">
  <view class="form-section">
    <view class="form-item">
      <text class="form-label">赛事名称 *</text>
      <input class="form-input" placeholder="请输入赛事名称" value="{{form.title}}" data-field="title" bindinput="onInputChange" />
    </view>

    <view class="form-item">
      <text class="form-label">赛事描述</text>
      <textarea class="form-textarea" placeholder="请输入赛事描述" value="{{form.description}}" data-field="description" bindinput="onInputChange" />
    </view>

    <view class="form-item">
      <text class="form-label">赛事类型</text>
      <picker mode="selector" range="{{typeOptions}}" range-key="label" value="{{typeIndex}}" bindchange="onTypeChange">
        <view class="form-picker">
          <text>{{typeOptions[typeIndex].label}}</text>
          <text class="picker-arrow">▼</text>
        </view>
      </picker>
    </view>

    <view class="form-item">
      <text class="form-label">赛制</text>
      <picker mode="selector" range="{{formatOptions}}" range-key="label" value="{{formatIndex}}" bindchange="onFormatChange">
        <view class="form-picker">
          <text>{{formatOptions[formatIndex].label}}</text>
          <text class="picker-arrow">▼</text>
        </view>
      </picker>
    </view>

    <view class="form-item">
      <text class="form-label">比赛地点</text>
      <input class="form-input" placeholder="请输入比赛地点" value="{{form.location}}" data-field="location" bindinput="onInputChange" />
    </view>

    <view class="form-item">
      <text class="form-label">最大参赛人数</text>
      <input class="form-input" type="number" placeholder="32" value="{{form.max_participants}}" data-field="max_participants" bindinput="onInputChange" />
    </view>

    <view class="form-item">
      <text class="form-label">报名开始时间</text>
      <picker mode="date" data-field="registration_start" bindchange="onDateChange">
        <view class="form-picker">
          <text>{{form.registration_start || '请选择'}}</text>
          <text class="picker-arrow">▼</text>
        </view>
      </picker>
    </view>

    <view class="form-item">
      <text class="form-label">报名截止时间</text>
      <picker mode="date" data-field="registration_end" bindchange="onDateChange">
        <view class="form-picker">
          <text>{{form.registration_end || '请选择'}}</text>
          <text class="picker-arrow">▼</text>
        </view>
      </picker>
    </view>

    <view class="form-item">
      <text class="form-label">比赛开始时间</text>
      <picker mode="date" data-field="event_start" bindchange="onDateChange">
        <view class="form-picker">
          <text>{{form.event_start || '请选择'}}</text>
          <text class="picker-arrow">▼</text>
        </view>
      </picker>
    </view>

    <view class="form-item row">
      <text class="form-label">计入积分排名</text>
      <switch checked="{{form.counts_for_ranking}}" data-field="counts_for_ranking" bindchange="onSwitchChange" color="#FF6B00" />
    </view>

    <view class="form-item" wx:if="{{isEdit}}">
      <text class="form-label">赛事状态</text>
      <picker mode="selector" range="{{statusOptions}}" range-key="label" value="{{statusIndex}}" bindchange="onStatusChange">
        <view class="form-picker">
          <text>{{statusOptions[statusIndex].label}}</text>
          <text class="picker-arrow">▼</text>
        </view>
      </picker>
    </view>
  </view>

  <button class="submit-btn" bindtap="onSubmit" disabled="{{isSubmitting}}">
    {{isSubmitting ? '提交中...' : (isEdit ? '保存修改' : '创建赛事')}}
  </button>
</view>
