<!-- pages/events/events.wxml -->
<view class="events-page">
  <!-- ç­›é€‰æ ‡ç­¾ -->
  <view class="filter-tabs">
    <view
      wx:for="{{tabs}}"
      wx:key="key"
      class="tab-item {{currentTab === item.key ? 'active' : ''}}"
      data-key="{{item.key}}"
      bindtap="onTabChange"
    >
      {{item.label}}
    </view>
  </view>

  <!-- èµ›äº‹åˆ—è¡¨ -->
  <view class="event-list">
    <view
      wx:for="{{events}}"
      wx:key="id"
      class="event-card"
      data-id="{{item.id}}"
      bindtap="onTapEvent"
    >
      <view class="event-header">
        <view class="event-type-tag {{item.event_type}}">
          {{item.event_type === 'singles' ? 'å•æ‰“' : item.event_type === 'doubles' ? 'åŒæ‰“' : 'å›¢ä½“'}}
        </view>
        <view class="event-status {{item.status}}">
          {{item.status === 'registration' ? 'æŠ¥åä¸­' : item.status === 'ongoing' ? 'è¿›è¡Œä¸­' : 'å·²ç»“æŸ'}}
        </view>
      </view>

      <view class="event-title">{{item.title}}</view>

      <view class="event-info">
        <view class="info-item">
          <text class="info-icon">ğŸ“…</text>
          <text>{{item.event_start}}</text>
        </view>
        <view class="info-item">
          <text class="info-icon">ğŸ“</text>
          <text>{{item.location}}</text>
        </view>
      </view>

      <view class="event-footer">
        <view class="participant-info">
          <text class="participant-count">{{item.participant_count}}</text>
          <text class="participant-total">/{{item.max_participants}}äºº</text>
        </view>
        <view class="action-btn" wx:if="{{item.status === 'registration'}}">ç«‹å³æŠ¥å</view>
        <view class="action-btn secondary" wx:elif="{{item.status === 'ongoing'}}">æŸ¥çœ‹å¯¹é˜µ</view>
        <view class="action-btn secondary" wx:else>æŸ¥çœ‹è¯¦æƒ…</view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-tip" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
  <view class="empty-tip" wx:if="{{!loading && events.length === 0}}">
    <text>æš‚æ— èµ›äº‹</text>
  </view>
</view>
