<view class="learning-page">
  <!-- Tabæ  -->
  <view class="tabs">
    <view
      wx:for="{{tabs}}"
      wx:key="key"
      class="tab {{currentTab === item.key ? 'active' : ''}}"
      bindtap="onSwitchTab"
      data-tab="{{item.key}}"
    >{{item.label}}</view>
  </view>

  <!-- èµ„æ–™åˆ—è¡¨ -->
  <scroll-view
    class="material-list"
    scroll-y
    bindscrolltolower="onLoadMore"
  >
    <!-- è§†é¢‘åˆ—è¡¨ -->
    <block wx:if="{{currentTab === 'video'}}">
      <view
        class="video-card"
        wx:for="{{materials}}"
        wx:key="id"
        bindtap="onTapMaterial"
        data-id="{{item.id}}"
        data-type="video"
        data-url="{{item.url}}"
      >
        <view class="video-cover" style="{{item.cover_url ? 'background-image: url(' + item.cover_url + ')' : ''}}">
          <view class="play-btn">
            <view class="play-icon"></view>
          </view>
        </view>
        <view class="video-info">
          <text class="video-title">{{item.title}}</text>
          <text class="video-meta">{{item.view_label || '0'}}æ¬¡è§‚çœ‹</text>
        </view>
      </view>
    </block>

    <!-- PDFæ–‡æ¡£åˆ—è¡¨ -->
    <block wx:elif="{{currentTab === 'document'}}">
      <view
        class="doc-card"
        wx:for="{{materials}}"
        wx:key="id"
        bindtap="onTapMaterial"
        data-id="{{item.id}}"
        data-type="document"
        data-url="{{item.url}}"
      >
        <view class="doc-icon">PDF</view>
        <view class="doc-info">
          <text class="doc-title">{{item.title}}</text>
          <text class="doc-meta">{{item.view_label || '0'}}æ¬¡æŸ¥çœ‹</text>
        </view>
        <view class="doc-arrow"></view>
      </view>
    </block>

    <!-- PPTè¯¾ä»¶åˆ—è¡¨ -->
    <block wx:else>
      <view
        class="doc-card ppt-card"
        wx:for="{{materials}}"
        wx:key="id"
        bindtap="onTapMaterial"
        data-id="{{item.id}}"
        data-type="ppt"
        data-url="{{item.url}}"
      >
        <view class="doc-icon ppt-icon">PPT</view>
        <view class="doc-info">
          <text class="doc-title">{{item.title}}</text>
          <text class="doc-meta">{{item.view_label || '0'}}æ¬¡ä¸‹è½½ Â· ç‚¹å‡»ä¸‹è½½</text>
        </view>
        <view class="doc-arrow"></view>
      </view>
    </block>

    <view class="loading" wx:if="{{isLoading}}">åŠ è½½ä¸­...</view>
    <view class="no-more" wx:if="{{noMore && materials.length > 0}}">æ²¡æœ‰æ›´å¤šäº†</view>
    <view class="empty" wx:if="{{!isLoading && materials.length === 0}}">
      <text class="empty-icon">ðŸ“š</text>
      <text class="empty-text">æš‚æ— {{currentTab === 'video' ? 'è§†é¢‘' : (currentTab === 'document' ? 'PDF' : 'PPT')}}èµ„æ–™</text>
    </view>
  </scroll-view>
</view>
