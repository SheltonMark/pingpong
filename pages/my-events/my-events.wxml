<view class="my-events-page">
  <!-- ç­›é€‰æ ‡ç­¾ -->
  <view class="filter-tabs">
    <view
      wx:for="{{tabs}}"
      wx:key="key"
      class="tab-item {{currentTab === item.key ? 'active' : ''}}"
      bindtap="onSwitchTab"
      data-tab="{{item.key}}"
    >{{item.label}}</view>
  </view>

  <!-- èµ›äº‹åˆ—è¡¨ -->
  <view class="event-list">
    <view
      class="event-card"
      wx:for="{{events}}"
      wx:key="id"
      bindtap="onTapEvent"
      data-id="{{item.id}}"
    >
      <view class="event-header">
        <view class="event-type-tag {{item.event_type}}">
          {{item.type_label}}
        </view>
        <view class="event-status {{item.status}}">
          {{item.status === 'registration' ? 'æŠ¥åä¸­' : item.status === 'pending_start' ? 'å¾…å¼€å§‹' : item.status === 'ongoing' ? 'è¿›è¡Œä¸­' : 'å·²ç»“æŸ'}}
        </view>
      </view>

      <view class="event-title">{{item.title}}</view>

      <view class="event-info">
        <view class="info-item">
          <text class="info-icon">ğŸ“…</text>
          <text>{{item.event_start_fmt}}</text>
        </view>
        <view class="info-item" wx:if="{{item.location}}">
          <text class="info-icon">ğŸ“</text>
          <text>{{item.location}}</text>
        </view>
      </view>

      <view class="event-stats" wx:if="{{item.my_wins > 0 || item.my_losses > 0}}">
        <text class="stats-label">æˆ‘çš„æˆ˜ç»©</text>
        <text class="stats-value">{{item.my_wins}}èƒœ {{item.my_losses}}è´Ÿ</text>
      </view>

      <view class="event-footer">
        <view class="participant-info">
          <text class="participant-count">{{item.participant_count}}</text>
          <text class="participant-total">/{{item.max_participants}}äºº</text>
        </view>
        <view class="action-btn" wx:if="{{item.status === 'registration'}}">æŸ¥çœ‹è¯¦æƒ…</view>
        <view class="action-btn secondary" wx:elif="{{item.status === 'ongoing'}}">æŸ¥çœ‹å¯¹é˜µ</view>
        <view class="action-btn secondary" wx:else>æŸ¥çœ‹è¯¦æƒ…</view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-tip" wx:if="{{isLoading}}">åŠ è½½ä¸­...</view>
  <view class="empty" wx:if="{{!isLoading && events.length === 0}}">
    <text class="empty-icon">ğŸ†</text>
    <text class="empty-text">æš‚æ— èµ›äº‹</text>
  </view>
</view>
