<view class="publish-page">
  <!-- ç±»å‹é€‰æ‹© -->
  <view class="type-selector">
    <view class="type-item {{postType === 'post' ? 'active' : ''}}" bindtap="onSelectType" data-type="post">
      <text class="type-icon">ğŸ“</text>
      <text class="type-label">å‘åŠ¨æ€</text>
    </view>
    <view class="type-item {{postType === 'invitation' ? 'active' : ''}}" bindtap="onSelectType" data-type="invitation">
      <text class="type-icon">ğŸ“</text>
      <text class="type-label">çº¦çƒ</text>
    </view>
  </view>

  <!-- å†…å®¹è¾“å…¥ -->
  <view class="content-section">
    <textarea
      class="content-input"
      placeholder="{{postType === 'post' ? 'åˆ†äº«ä½ çš„ä¹’ä¹“æ—¥å¸¸...' : 'è¯´è¯´ä½ çš„çº¦çƒè®¡åˆ’...'}}"
      maxlength="150"
      bindinput="onContentInput"
      value="{{content}}"
    />
    <text class="char-count">{{content.length}}/150</text>
  </view>

  <!-- å›¾ç‰‡ä¸Šä¼  -->
  <view class="image-section">
    <view class="image-grid">
      <view class="image-item" wx:for="{{images}}" wx:key="*this">
        <image src="{{item}}" mode="aspectFill" />
        <view class="remove-btn" catchtap="onRemoveImage" data-index="{{index}}">Ã—</view>
      </view>
      <view class="add-image" wx:if="{{images.length < 9}}" bindtap="onAddImage">
        <text class="add-icon">+</text>
        <text class="add-text">æ·»åŠ å›¾ç‰‡</text>
      </view>
    </view>
    <text class="image-tip">æœ€å¤š9å¼ å›¾ç‰‡</text>
  </view>

  <!-- çº¦çƒä¸“å±å­—æ®µ -->
  <block wx:if="{{postType === 'invitation'}}">
    <view class="form-section">
      <view class="form-item">
        <text class="form-label">ğŸ“ åœ°ç‚¹</text>
        <input class="form-input" placeholder="æ¯”èµ›åœ°ç‚¹" bindinput="onLocationInput" value="{{location}}" />
      </view>
      <view class="form-item">
        <text class="form-label">ğŸ• æ—¥æœŸ</text>
        <picker mode="date" bindchange="onDateChange" value="{{date}}">
          <view class="picker-value">{{date || 'é€‰æ‹©æ—¥æœŸ'}}</view>
        </picker>
      </view>
      <view class="form-item">
        <text class="form-label">ğŸ• æ—¶é—´</text>
        <picker mode="time" bindchange="onTimeChange" value="{{time}}">
          <view class="picker-value">{{time || 'é€‰æ‹©æ—¶é—´'}}</view>
        </picker>
      </view>
      <view class="form-item">
        <text class="form-label">ğŸ‘¥ äººæ•°</text>
        <view class="number-picker">
          <view class="num-btn" bindtap="onDecrease">-</view>
          <text class="num-value">{{maxParticipants}}</text>
          <view class="num-btn" bindtap="onIncrease">+</view>
        </view>
      </view>
    </view>
  </block>

  <!-- å‘å¸ƒæŒ‰é’® -->
  <view class="submit-section">
    <button class="submit-btn" bindtap="onSubmit" disabled="{{!content || isSubmitting}}">
      {{isSubmitting ? 'å‘å¸ƒä¸­...' : 'å‘å¸ƒ'}}
    </button>
  </view>
</view>
