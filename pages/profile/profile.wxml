<view class="profile-page">
  <!-- ç”¨æˆ·ä¿¡æ¯å¤´éƒ¨ -->
  <view class="user-header">
    <view class="header-bg"></view>
    <view class="header-content">
      <!-- æœªç™»å½• -->
      <block wx:if="{{!isLoggedIn}}">
        <view class="avatar-placeholder" bindtap="goToLogin">
          <text class="avatar-icon">ğŸ‘¤</text>
        </view>
        <text class="login-text" bindtap="goToLogin">ç‚¹å‡»ç™»å½•</text>
      </block>

      <!-- å·²ç™»å½• -->
      <block wx:else>
        <image
          class="avatar"
          src="{{userInfo.avatar_url || '/images/default-avatar.png'}}"
          mode="aspectFill"
        />
        <view class="user-info">
          <text class="user-name">{{userInfo.name || 'æœªè®¾ç½®æ˜µç§°'}}</text>
          <view class="user-tags" wx:if="{{isRegistered}}">
            <text class="tag">{{userInfo.school_name || 'æœªçŸ¥å­¦æ ¡'}}</text>
            <text class="tag" wx:if="{{userInfo.college_name}}">{{userInfo.college_name}}</text>
          </view>
          <view class="complete-btn" wx:if="{{!isRegistered}}" bindtap="goToRegister">
            å®Œå–„ä¸ªäººä¿¡æ¯ â†’
          </view>
        </view>
      </block>
    </view>
  </view>

  <!-- æ•°æ®ç»Ÿè®¡ -->
  <view class="stats-card" wx:if="{{isRegistered}}">
    <view class="stat-item">
      <text class="stat-value">0</text>
      <text class="stat-label">çº¦çƒ</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value">0</text>
      <text class="stat-label">èµ›äº‹</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value">0</text>
      <text class="stat-label">èƒœåœº</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-value">0</text>
      <text class="stat-label">ç§¯åˆ†</text>
    </view>
  </view>

  <!-- èœå•åˆ—è¡¨ -->
  <view class="menu-section">
    <view
      wx:for="{{menuItems}}"
      wx:key="label"
      class="menu-item"
      data-url="{{item.url}}"
      bindtap="onTapMenu"
    >
      <text class="menu-icon">{{item.icon}}</text>
      <view class="menu-info">
        <text class="menu-label">{{item.label}}</text>
        <text class="menu-desc">{{item.desc}}</text>
      </view>
      <text class="menu-arrow">â€º</text>
    </view>
  </view>

  <!-- åº•éƒ¨é“¾æ¥ -->
  <view class="footer-links">
    <text class="link" bindtap="viewPrivacy">éšç§æ”¿ç­–</text>
    <text class="divider">|</text>
    <text class="link" bindtap="viewAgreement">ç”¨æˆ·åè®®</text>
  </view>

  <!-- é€€å‡ºç™»å½•æŒ‰é’® -->
  <view class="logout-section" wx:if="{{isLoggedIn}}">
    <button class="logout-btn" bindtap="onLogout">é€€å‡ºç™»å½•</button>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version-info">
    <text>æ ¡ä¹’ç½‘ v1.0.0</text>
  </view>
</view>
