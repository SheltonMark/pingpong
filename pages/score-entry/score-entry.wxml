<!-- pages/score-entry/score-entry.wxml -->
<view class="score-entry-page" wx:if="{{!loading}}">
  <!-- 对阵双方 -->
  <view class="match-card">
    <view class="player-side">
      <image class="player-avatar" src="{{match.player1_avatar || '/images/default-avatar.png'}}" mode="aspectFill" />
      <text class="player-name">{{match.player1_name}}</text>
    </view>
    <view class="vs-text">VS</view>
    <view class="player-side">
      <image class="player-avatar" src="{{match.player2_avatar || '/images/default-avatar.png'}}" mode="aspectFill" />
      <text class="player-name">{{match.player2_name}}</text>
    </view>
  </view>

  <!-- 每局比分输入 -->
  <view class="scores-card">
    <view class="card-title">每局比分</view>

    <view class="score-rows">
      <view class="score-row" wx:for="{{scores}}" wx:key="game_number">
        <text class="game-label">第{{item.game_number}}局</text>
        <view class="score-inputs">
          <input
            class="score-input"
            type="number"
            placeholder="--"
            value="{{item.player1_score}}"
            data-game="{{item.game_number}}"
            data-player="1"
            bindinput="onScoreInput"
          />
          <text class="score-colon">:</text>
          <input
            class="score-input"
            type="number"
            placeholder="--"
            value="{{item.player2_score}}"
            data-game="{{item.game_number}}"
            data-player="2"
            bindinput="onScoreInput"
          />
        </view>
      </view>
    </view>

    <!-- 总比分显示 -->
    <view class="total-score-box">
      <text class="total-label">当前比分</text>
      <view class="total-score">
        <text class="score-num">{{totalScore.player1}}</text>
        <text class="score-separator">:</text>
        <text class="score-num">{{totalScore.player2}}</text>
      </view>
    </view>
  </view>

  <!-- 提交按钮 -->
  <view class="bottom-action">
    <button class="submit-btn" bindtap="onSubmit" disabled="{{submitting}}">
      {{submitting ? '提交中...' : '提交比分'}}
    </button>
  </view>
</view>

<!-- 加载中 -->
<view class="loading" wx:if="{{loading}}">
  <text>加载中...</text>
</view>
