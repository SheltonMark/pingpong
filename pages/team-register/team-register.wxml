<view class="register-page" wx:if="{{event}}">
  <!-- èµ›äº‹ä¿¡æ¯ -->
  <view class="event-card">
    <text class="event-name">{{event.name}}</text>
    <text class="event-info">å›¢ä½“èµ› Â· {{event.format_label}}</text>
  </view>

  <!-- é˜Ÿä¼åç§° -->
  <view class="team-card">
    <view class="card-header">
      <text class="card-title">é˜Ÿä¼åç§°</text>
    </view>
    <input
      class="team-name-input"
      placeholder="è¯·è¾“å…¥é˜Ÿä¼åç§°"
      value="{{teamName}}"
      bindinput="onTeamNameInput"
    />
  </view>

  <!-- é˜Ÿå‘˜é…ç½® -->
  <view class="team-card">
    <view class="card-header">
      <text class="card-title">é˜Ÿå‘˜é…ç½® (å·²é‚€è¯· {{teamSlots.length}}/{{teamSlots.length}})</text>
    </view>
    <view class="team-list">
      <view
        class="team-slot {{item.status}}"
        wx:for="{{teamSlots}}"
        wx:key="index"
      >
        <!-- å·²ç¡®è®¤/å¾…ç¡®è®¤çš„æˆå‘˜ -->
        <block wx:if="{{item.user}}">
          <view class="slot-avatar">{{item.isLeader ? 'ğŸ˜' : 'ğŸ§‘'}}</view>
          <view class="slot-info">
            <text class="slot-name">{{item.user.name}}{{item.isLeader ? 'ï¼ˆä½ ï¼‰' : ''}}</text>
            <text class="slot-position">{{item.isLeader ? 'é¢†é˜Ÿ Â· ' : ''}}{{item.position}}</text>
          </view>
          <text class="slot-status {{item.status}}">
            {{item.status === 'confirmed' ? 'å·²ç¡®è®¤' : 'å¾…ç¡®è®¤'}}
          </text>
        </block>

        <!-- ç©ºä½ -->
        <block wx:else>
          <view class="slot-avatar empty">+</view>
          <view class="slot-info">
            <text class="slot-position-empty">{{item.position}} - å¾…é‚€è¯·</text>
          </view>
          <button class="invite-btn" bindtap="onInvite" data-index="{{index}}">é‚€è¯·</button>
        </block>
      </view>
    </view>
  </view>

  <button
    class="submit-btn"
    bindtap="onSubmit"
    disabled="{{isSubmitting}}"
  >
    {{isSubmitting ? 'æäº¤ä¸­...' : 'æäº¤æŠ¥åï¼ˆéœ€å…¨å‘˜ç¡®è®¤ï¼‰'}}
  </button>
</view>

<!-- ç”¨æˆ·é€‰æ‹©å¼¹çª— -->
<view class="picker-mask" wx:if="{{showUserPicker}}" bindtap="onClosePicker">
  <view class="picker-content" catchtap="">
    <view class="picker-header">
      <text class="picker-title">é€‰æ‹©é˜Ÿå‘˜</text>
      <text class="picker-close" bindtap="onClosePicker">Ã—</text>
    </view>
    <scroll-view class="picker-list" scroll-y>
      <view
        class="picker-item"
        wx:for="{{availableUsers}}"
        wx:key="id"
        bindtap="onSelectUser"
        data-user="{{item}}"
      >
        <view class="picker-avatar">ğŸ§‘</view>
        <view class="picker-info">
          <text class="picker-name">{{item.name}}</text>
          <text class="picker-college">{{item.college_name}}</text>
        </view>
      </view>
      <view class="empty-tip" wx:if="{{availableUsers.length === 0}}">
        <text>æš‚æ— å¯é‚€è¯·çš„ç”¨æˆ·</text>
      </view>
    </scroll-view>
  </view>
</view>

<view class="loading" wx:if="{{isLoading}}">åŠ è½½ä¸­...</view>
