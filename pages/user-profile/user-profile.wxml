<view class="user-profile-page" wx:if="{{user}}">
  <!-- ç”¨æˆ·ä¿¡æ¯ -->
  <view class="profile-card">
    <image class="user-avatar" src="{{user.avatar_url || '/images/default-avatar.png'}}" mode="aspectFill" />
    <text class="user-name">{{user.name}}</text>
    <text class="user-info">{{user.school_name}} Â· {{user.college_name}}</text>

    <view class="user-stats">
      <view class="stat-item">
        <text class="stat-num orange">{{user.points}}</text>
        <text class="stat-label">ç§¯åˆ†</text>
      </view>
      <view class="stat-item">
        <text class="stat-num">#{{user.rank}}</text>
        <text class="stat-label">æ’å</text>
      </view>
    </view>
  </view>

  <!-- æœ€è¿‘äº¤æ‰‹è®°å½• -->
  <view class="records-card">
    <view class="card-header">
      <text class="card-title">æœ€è¿‘äº¤æ‰‹è®°å½•</text>
    </view>

    <view class="record-list">
      <view class="record-item" wx:for="{{recentMatches}}" wx:key="id">
        <view class="record-info">
          <text class="opponent-name">vs {{item.opponent}}</text>
          <text class="match-meta">{{item.event_name || 'çº¦çƒ'}} Â· {{item.date_label}}</text>
        </view>
        <text class="result {{item.is_win ? 'win' : 'lose'}}">{{item.is_win ? 'èƒœ' : 'è´Ÿ'}} {{item.score}}</text>
      </view>

      <view class="empty" wx:if="{{recentMatches.length === 0}}">
        <text>æš‚æ— äº¤æ‰‹è®°å½•</text>
      </view>
    </view>
  </view>
</view>

<view class="loading" wx:if="{{isLoading}}">åŠ è½½ä¸­...</view>

<view class="error" wx:if="{{!isLoading && !user}}">
  <text class="error-icon">ğŸ˜”</text>
  <text class="error-text">è¯¥ç”¨æˆ·å·²æ³¨é”€æˆ–ä¸å­˜åœ¨</text>
</view>
